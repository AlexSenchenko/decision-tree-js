var dt=function(){function p(a){var c={};if(a.ignoredAttributes)for(var d in a.ignoredAttributes)c[a.ignoredAttributes[d]]=!0;this.root=v({trainingSet:a.trainingSet,ignoredAttributes:c,categoryAttr:a.categoryAttr||"category",minItemsCount:a.minItemsCount||1,entropyThrehold:a.entropyThrehold||0.01,maxTreeDepth:a.maxTreeDepth||70})}function q(a,c){for(var d=a.trainingSet,e=[],b=0;b<c;b++)e[b]=[];for(b=0;b<d.length;b++)e[b%c].push(d[b]);d=[];for(b=0;b<c;b++){a.trainingSet=e[b];var f=new p(a);d.push(f)}this.trees= d}function r(a,c){var d={},e;for(e in a){var b=a[e][c];d[b]=d[b]?d[b]+1:1}return d}function w(a,c){var d=r(a,c),e=0,b;for(b in d)var f=d[b]/a.length,e=e+-f*Math.log(f);return e}function x(a,c){var d=r(a,c),e=0,b,f;for(f in d)d[f]>e&&(e=d[f],b=f);return b}function v(a){var c=a.trainingSet,d=a.minItemsCount,e=a.categoryAttr,b=a.entropyThrehold,f=a.maxTreeDepth,p=a.ignoredAttributes;if(0==f||c.length<=d)return{category:x(c,e)};d=w(c,e);if(d<=b)return{category:x(c,e)};var b={gain:0},m={},n;for(n in c){var q= c[n],k;for(k in q)if(k!=e&&!p[k]){var t=q[k],u;u="number"==typeof t?">=":"==";var s=k+u+t;if(!m[s]){m[s]=!0;var s=C[u],g;g=c;var l=k,y=s,h=t,r=[],A=[],B=void 0;for(B in g){var z=g[B];y(z[l],h)?r.push(z):A.push(z)}g={match:r,notMatch:A};l=w(g.match,e);y=w(g.notMatch,e);h=0;h+=l*g.match.length;h+=y*g.notMatch.length;h/=c.length;l=d-h;l>b.gain&&(b=g,b.predicateName=u,b.predicate=s,b.attribute=k,b.pivot=t,b.gain=l)}}}if(!b.gain)return{category:x(c,e)};a.maxTreeDepth=f-1;a.trainingSet=b.match;c=v(a);a.trainingSet= b.notMatch;a=v(a);return{attribute:b.attribute,predicate:b.predicate,predicateName:b.predicateName,pivot:b.pivot,match:c,notMatch:a,matchedCount:b.match.length,notMatchedCount:b.notMatch.length}}function m(a,c){if(a.category)return a.category;var d=a.predicate;return d(c[a.attribute],a.pivot)?m(a.match,c):m(a.notMatch,c)}var C={"==":function(a,c){return a==c},">=":function(a,c){return a>=c}};p.prototype.predict=function(a){return m(this.root,a)};q.prototype.predict=function(a){var c=this.trees,d= {},e;for(e in c){var b=c[e].predict(a);d[b]=d[b]?d[b]+1:1}return d};var n={};n.DecisionTree=p;n.RandomForest=q;return n}();