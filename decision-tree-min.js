var dt=function(){function p(a){var c={"==":function(a,b){return a==b},">=":function(a,b){return a>=b},"<=":function(a,b){return a<=b}};if(a.removeDefaultPredicates)for(var d in a.removeDefaultPredicates)delete c[a.removeDefaultPredicates[d]];this.root=r({trainingSet:a.trainingSet,categoryAttr:a.categoryAttr?a.categoryAttr:"category",minItemsCount:a.minItemsCount?a.minItemsCount:1,entropyThrehold:a.entropyThrehold?a.entropyThrehold:0.01,maxTreeDepth:a.maxTreeDepth?a.maxTreeDepth:70,predicates:c}); this.predict=function(a){return m(this.root,a)}}function q(a,c){var d={},e;for(e in a){var b=a[e][c];d[b]=d[b]?d[b]+1:1}return d}function s(a,c){var d=q(a,c),e=0,b;for(b in d)var f=d[b]/a.length,e=e+-f*Math.log(f);return e}function t(a,c){var d=q(a,c),e=0,b,f;for(f in d)d[f]>e&&(e=d[f],b=f);return b}function r(a){var c=a.trainingSet,d=a.minItemsCount,e=a.categoryAttr,b=a.entropyThrehold,f=a.maxTreeDepth,u=a.predicates;if(0==f||c.length<=d)return{category:t(c,e)};d=s(c,e);if(d<=b)return{category:t(c, e)};var b={gain:0},m;for(m in c){var g=c[m],n;for(n in g)if(n!=e)for(var v in u){var h;h=c;var l=n,w=u[v],k=g[n],p=[],q=[],y=void 0;for(y in h){var x=h[y],z=x[l];null!=z&&w(z,k)?p.push(x):q.push(x)}h={match:p,notMatch:q};l=s(h.match,e);w=s(h.notMatch,e);k=0;k+=l*h.match.length;k+=w*h.notMatch.length;k/=c.length;l=d-k;0<l&&b.gain<l&&(b=h,b.predicateName=v,b.predicate=u[v],b.attribute=n,b.pivot=g[n],b.gain=l)}}if(0>=b.gain)return{category:t(c,e)};a.maxTreeDepth=f-1;a.trainingSet=b.match;c=r(a);a.trainingSet= b.notMatch;a=r(a);return{attribute:b.attribute,predicate:b.predicate,predicateName:b.predicateName,pivot:b.pivot,match:c,notMatch:a}}function m(a,c){if(a.category)return a.category;var d=c[a.attribute],e=a.predicate,b=a.pivot;return null!=d&&e(d,b)?m(a.match,c):m(a.notMatch,c)}function A(a,c){for(var d=a.trainingSet,e=[],b=0;b<c;b++)e[b]=[];for(b=0;b<d.length;b++)e[b%c].push(d[b]);d=[];for(b=0;b<c;b++){a.trainingSet=e[b];var f=new p(a);d.push(f)}return d}var g={};g.DecisionTree=p;g.RandomForest=function(a, c){this.trees=A(a,c);this.predict=function(a){var c=this.trees,b={},f;for(f in c){var g=c[f].predict(a);b[g]=b[g]?b[g]+1:1}return b}};return g}();