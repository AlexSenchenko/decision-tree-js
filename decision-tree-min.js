var dt=function(){function l(a){var c={};if(a.predicates)for(var d in a.predicates){var e=a.predicates[d];c[e]=p[e]}else c=p;e={};if(a.ignoredAttributes)for(d in a.ignoredAttributes)e[a.ignoredAttributes[d]]=!0;this.root=v({trainingSet:a.trainingSet,categoryAttr:a.categoryAttr||"category",minItemsCount:a.minItemsCount||1,entropyThrehold:a.entropyThrehold||0.01,maxTreeDepth:a.maxTreeDepth||70,predicates:c,ignoredAttributes:e})}function q(a,c){for(var d=a.trainingSet,e=[],b=0;b<c;b++)e[b]=[];for(b= 0;b<d.length;b++)e[b%c].push(d[b]);d=[];for(b=0;b<c;b++){a.trainingSet=e[b];var f=new l(a);d.push(f)}this.trees=d}function r(a,c){var d={},e;for(e in a){var b=a[e][c];d[b]=d[b]?d[b]+1:1}return d}function w(a,c){var d=r(a,c),e=0,b;for(b in d)var f=d[b]/a.length,e=e+-f*Math.log(f);return e}function x(a,c){var d=r(a,c),e=0,b,f;for(f in d)d[f]>e&&(e=d[f],b=f);return b}function v(a){var c=a.trainingSet,d=a.minItemsCount,e=a.categoryAttr,b=a.entropyThrehold,f=a.maxTreeDepth,l=a.predicates,t=a.ignoredAttributes; if(0==f||c.length<=d)return{category:x(c,e)};d=w(c,e);if(d<=b)return{category:x(c,e)};var b={gain:0},n={},p;for(p in c){var q=c[p],k;for(k in q)if(k!=e&&!t[k]){var y=q[k],u;for(u in l){var s=k+u+y;if(!0!=n[s]){n[s]=!0;var s=l[u],g;g=c;var m=k,z=s,h=y,r=[],B=[],C=void 0;for(C in g){var A=g[C];z(A[m],h)?r.push(A):B.push(A)}g={match:r,notMatch:B};m=w(g.match,e);z=w(g.notMatch,e);h=0;h+=m*g.match.length;h+=z*g.notMatch.length;h/=c.length;m=d-h;m>b.gain&&(b=g,b.predicateName=u,b.predicate=s,b.attribute= k,b.pivot=y,b.gain=m)}}}}if(!b.gain)return{category:x(c,e)};a.maxTreeDepth=f-1;a.trainingSet=b.match;c=v(a);a.trainingSet=b.notMatch;a=v(a);return{attribute:b.attribute,predicate:b.predicate,predicateName:b.predicateName,pivot:b.pivot,match:c,notMatch:a,matchedCount:b.match.length,notMatchedCount:b.notMatch.length}}function t(a,c){if(a.category)return a.category;var d=a.predicate;return d(c[a.attribute],a.pivot)?t(a.match,c):t(a.notMatch,c)}var p={"==":function(a,c){return a==c},">=":function(a,c){return a>= c},"<=":function(a,c){return a<=c}};l.prototype.predict=function(a){return t(this.root,a)};q.prototype.predict=function(a){var c=this.trees,d={},e;for(e in c){var b=c[e].predict(a);d[b]=d[b]?d[b]+1:1}return d};var n={};n.DecisionTree=l;n.RandomForest=q;return n}();